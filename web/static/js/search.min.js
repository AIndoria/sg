function loadDone(e){document.querySelector("#__search-block").innerHTML=e;var r=document.querySelector("#game-cards-container");msnry=new Packery(r,masonaryOptions),time.init(r),imagesLoaded(".card-bg",{background:!0}).on("progress",function(e,r){r.element.style.opacity=1})}var elem=document.querySelector("#game-cards-container"),masonaryOptions={itemSelector:".game-card",columnWidth:".game-card-sizer",percentPosition:!0,horizontalOrder:!0},msnry=new Packery(elem,masonaryOptions);imagesLoaded(".card-bg",{background:!0}).on("progress",function(e,r){r.element.style.opacity=1});var searchTerm=document.getElementById("__search-block").querySelector("[data-term]").dataset.term,genres=document.querySelectorAll("#genres-dropdown input.genre"),checkedGenres=[];""!==location.search.substring(1)&&"string"==typeof http.fromParam(location.search.substring(1)).genres&&(checkedGenres=http.fromParam(location.search.substring(1)).genres.split(","));for(var i=0;i<genres.length;i++)genres[i].addEventListener("change",function(e){this.checked?checkedGenres.push(e.target.dataset.slug):checkedGenres.splice(checkedGenres.indexOf(e.target.dataset.slug),1);var r;(r=""===location.search.substring(1)?{}:http.fromParam(location.search.substring(1))).ajaxSearch=1,r.genres=checkedGenres.join(","),history.pushState(null,null,updateUrlParameter(window.location.href,"genres",checkedGenres.join(",")));var t=document.querySelector(".search-settings .title"),n=document.querySelector(".search-settings .date");t.href=updateUrlParameter(t.getAttribute("href"),"genres",checkedGenres.join(",")),n.href=updateUrlParameter(n.getAttribute("href"),"genres",checkedGenres.join(",")),-1!==window.location.pathname.indexOf("/group/")?http.get({url:"/group/"+searchTerm+"/",data:r},loadDone):http.get({url:"/search/"+searchTerm+"/",data:r},loadDone)});